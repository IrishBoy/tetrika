Читаем с файла, сплитя по пробелу, потом удаляем каждый третий, начиная с 0, потом каждый второй, начиная с 1 - остаются только IP
Потом просто считаем частоту для каждого и берем 5 самых частых
Считаем с помощтю конвертирования в сэт(убираем повторы) и потом просто в исходном списке считаем для каждого, и реверсим, чтобы взять максимальные 

Ответ :
154.157.157.156
82.146.232.163
226.247.119.128
194.78.107.33
21.143.243.182
